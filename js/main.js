!function(I){var g={};function n(t){if(g[t])return g[t].exports;var C=g[t]={i:t,l:!1,exports:{}};return I[t].call(C.exports,C,C.exports,n),C.l=!0,C.exports}n.m=I,n.c=g,n.d=function(I,g,t){n.o(I,g)||Object.defineProperty(I,g,{enumerable:!0,get:t})},n.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},n.t=function(I,g){if(1&g&&(I=n(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var C in I)n.d(t,C,function(g){return I[g]}.bind(null,C));return t},n.n=function(I){var g=I&&I.__esModule?function(){return I.default}:function(){return I};return n.d(g,"a",g),g},n.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},n.p="",n(n.s=0)}([function(module,exports,__webpack_require__){"use strict";eval('\r\n\r\nconst table = document.querySelector(".table__body--js");\r\nconst form = document.querySelector(".form--js");\r\nconst searchCompany = document.getElementById("filter");\r\nconst select = document.querySelector(".form__select--js");\r\nconst pagination = document.querySelector(".pagination--js");\r\n// let companyDetails = [];\r\n// let detailsContener = null;\r\n\r\nlet state = {\r\n  companiesData: [],\r\n  filteredCompanies: [],\r\n  page: 0,\r\n  perPage: 10,\r\n  loaded: false,\r\n}\r\n\r\nif (!state.loaded) {\r\n  table.innerHTML = `<tr><td colspan="4" class="loader"><div class="loader__item"></div></td></tr>`;\r\n}\r\n\r\nsearchCompany.onkeypress = handleKeypress;\r\nform.onsubmit = handleSubmit;\r\nselect.onchange = handleSelect;\r\n\r\nfunction handleKeypress(e) {\r\n  setTimeout(() => {\r\n    let userInput = e.target.value;\r\n    state.filteredCompanies = state.companiesData.filter(company =>\r\n      company.name.toLowerCase().includes(userInput.toLowerCase())\r\n    );\r\n    state.page = 0;\r\n    showData(state.filteredCompanies);\r\n  }, 1000);\r\n}\r\n\r\nfunction handleSelect(e) {\r\n  state.page = 0;\r\n  state.perPage = parseInt(e.target.value);\r\n  showData(state.companiesData);\r\n}\r\n\r\nfunction handleSubmit(e) {\r\n  e.preventDefault();\r\n}\r\n\r\nfunction fetchData() {\r\n  fetch("https://recruitment.hal.skygate.io/companies")\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      const dataLength = data.length;\r\n      data.map(company => {\r\n        fetch("https://recruitment.hal.skygate.io/incomes/" + company.id)\r\n          .then(res => res.json())\r\n          .then(res => {\r\n            const companyIncome = res.incomes\r\n              .map(income => parseFloat(income.value))\r\n              .reduce((a, b) => a + b);\r\n\r\n              state.companiesData.push({\r\n              id: company.id,\r\n              name: company.name,\r\n              city: company.city,\r\n              income: companyIncome.toFixed(2)\r\n            });\r\n            if (state.companiesData.length === dataLength) {\r\n              state.companiesData.sort((a, b) => b.income - a.income);\r\n              showData(state.companiesData, 10);\r\n            }\r\n          });\r\n      });\r\n    });\r\n}\r\n\r\nfunction showData(data) {\r\n  let sliceFrom = 0 + state.perPage * state.page;\r\n  let sliceTo = state.perPage + state.perPage * state.page;\r\n  pagination.innerHTML = "";\r\n\r\n  table.innerHTML = data\r\n    .map(\r\n      company => `\r\n        <tr class="table__row table__row--js" id="${company.id}">\r\n          <td class="table__data">${company.id}</td>\r\n          <td class="table__data">${company.name}</td>\r\n          <td class="table__data">${company.city}</td>\r\n          <td class="table__data">${company.income}</td>\r\n        </tr>\r\n        `\r\n    )\r\n    .slice(sliceFrom, sliceTo)\r\n    .join("");\r\n\r\n\r\n/* HANDLE COMPANY DETAILS */\r\n\r\nconst detailsContener = document.querySelector(\'.details--js\');\r\nconst tableContainer = document.querySelector(\'.container\');\r\nconst companyDetails = Array.from(document.querySelectorAll(\'.table__row--js\'));\r\n\r\n    function countAvgIncomes(data) {\r\n      const avgIncomes = data.map(income => parseFloat(income.value)).reduce((a,b) => a+b) / data.length;\r\n      return avgIncomes.toFixed(2);\r\n    }\r\n\r\n    function countTotalIncomes(data) {\r\n      return data\r\n      .map(income => parseFloat(income.value))\r\n      .reduce((a,b) => a+b)\r\n      .toFixed(2);\r\n    }\r\n\r\n    companyDetails.map(company => company.addEventListener(\'click\', () => {\r\n      detailsContener.classList.add(\'details--visible\');\r\n      tableContainer.classList.add(\'container--hidden\');\r\n      let averageIncomes = null;\r\n      let lastMonthIncome = null;\r\n      let totalRangeIncome = \'No incomes in selected range\';\r\n      let avgRangeIncome = \'No incomes in selected range\';\r\n\r\n      fetch("https://recruitment.hal.skygate.io/incomes/" + company.id)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          // averageIncomes = ( data.incomes.map(income => parseFloat(income.value)).reduce((a,b) => a+b) / data.incomes.length ).toFixed(2);\r\n          \r\n          const sortedIncomes = data.incomes.sort((a,b) => new Date(b.date) - new Date(a.date))\r\n          const lastMonth = new Date(sortedIncomes[0].date).getMonth();\r\n          const relevantYear = new Date(sortedIncomes[0].date).getFullYear();\r\n          const filteredIncomes = sortedIncomes.filter(item => new Date(item.date).getMonth() === lastMonth && new Date(item.date).getFullYear() === relevantYear)\r\n          \r\n          lastMonthIncome = countTotalIncomes(filteredIncomes)\r\n          averageIncomes = countAvgIncomes(data.incomes)\r\n          // lastMonthIncome = sortedIncomes\r\n          //   .filter(item => new Date(item.date).getMonth() === lastMonth && new Date(item.date).getFullYear() === relevantYear)\r\n          //   .map(income => parseFloat(income.value))\r\n          //   .reduce((a,b) => a+b)\r\n          //   .toFixed(2);\r\n          \r\n          detailsContener.innerHTML = `\r\n          <div class="details__box">\r\n          <h1>${company.cells[1].textContent}</h1>\r\n          <p><b>City:</b> ${company.cells[2].textContent}</p>\r\n          <p><b>Total income:</b> ${company.cells[3].textContent}</p>\r\n          <p><b>Average income:</b> ${averageIncomes}</p>\r\n          <p><b>Last month income</b> (${new Date(sortedIncomes[0].date).toLocaleDateString(\'en-GB\', {month: \'long\'})}): ${lastMonthIncome}</p>\r\n          <p><b>Show total and average incomes</b></p>\r\n        \r\n          <p>\r\n            <label for="incomes-from">From: </label>\r\n            <input type="date" id="incomes-from">\r\n            <label for="incomes-to">To: </label>\r\n            <input type="date" id="incomes-to">\r\n            <div class="tooltip tooltip--js">\r\n              <span class="tooltiptext">Choose subsequent date or the same as a date \'From\'</span>\r\n            </div>\r\n          </p>\r\n\r\n          <div class="details__range details__range--js"></div>\r\n\r\n          <button class="return" id="return">Return</button>\r\n          </div>\r\n          `\r\n            \r\n                      const incomesFrom = document.getElementById(\'incomes-from\');\r\n                      const incomesTo = document.getElementById(\'incomes-to\');\r\n                      const tooltip = document.querySelector(\'.tooltip--js\');\r\n                      const detailsRange = document.querySelector(\'.details__range--js\');\r\n                      let dateFrom = null;\r\n                      let dateTo = null;\r\n\r\n                      incomesFrom.addEventListener(\'change\', (e) => {\r\n                        if(e.target.value <= dateTo) {\r\n                          tooltip.classList.remove(\'tooltip--visible\');\r\n                        } else {\r\n                          tooltip.classList.add(\'tooltip--visible\');\r\n                          totalRangeIncome = \'No incomes in selected range\';\r\n                          detailsRange.innerHTML = \'\';\r\n                        }\r\n                        dateFrom = e.target.value;\r\n                        filterIncomesFromRange();\r\n                      })\r\n                      incomesTo.addEventListener(\'change\', (e) => {\r\n                        if(e.target.value < dateFrom) {\r\n                          tooltip.classList.add(\'tooltip--visible\');\r\n                          totalRangeIncome = \'No incomes in selected range\';\r\n                          detailsRange.innerHTML = \'\';\r\n                        } else {\r\n                          tooltip.classList.remove(\'tooltip--visible\');\r\n                      }\r\n\r\n                        dateTo = e.target.value;\r\n                        filterIncomesFromRange();\r\n                      })\r\n\r\n                      function filterIncomesFromRange() {\r\n                        if(dateTo >= dateFrom && dateFrom !== null && dateTo !== null) {\r\n                          const filteredIncomesFromRange = sortedIncomes.filter(item => new Date(item.date).getTime() >= new Date(dateFrom).getTime() && new Date(item.date).getTime() <= new Date(dateTo).getTime());\r\n\r\n                          if(filteredIncomesFromRange != false) {\r\n                            totalRangeIncome = countTotalIncomes(filteredIncomesFromRange);\r\n                          }\r\n                            detailsRange.innerHTML = `\r\n                            <p>total: ${totalRangeIncome}</p>\r\n                            `;\r\n                        }\r\n                      }\r\n                      // <p>average: ${avgRangeIncome}</p>\r\n\r\n\r\n\r\n          const returnButton = document.getElementById(\'return\');\r\n          returnButton.addEventListener(\'click\', () => {\r\n            detailsContener.classList.remove(\'details--visible\')\r\n            tableContainer.classList.remove(\'container--hidden\')\r\n          })\r\n        })\r\n    }))\r\n\r\n/* HANDLE PAGINATION */\r\n  for (let i = 1; i <= Math.ceil(data.length / state.perPage); i++) {\r\n    pagination.innerHTML += `\r\n      <button class="pagination__button pagination__button--js">${i}</button>\r\n      `;\r\n  }\r\n\r\n  const buttons = Array.from(\r\n    document.querySelectorAll(".pagination__button--js")\r\n  );\r\n  \r\n  buttons.map(button => {\r\n    button.addEventListener("click", e => {\r\n      state.page = e.target.textContent - 1;\r\n      showData(data, state.perPage);\r\n    });\r\n  });\r\n}\r\n\r\nfetchData();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxXQUFXO0FBQy9ELG9DQUFvQyxXQUFXO0FBQy9DLG9DQUFvQyxhQUFhO0FBQ2pELG9DQUFvQyxhQUFhO0FBQ2pELG9DQUFvQyxlQUFlO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw2QkFBNkI7QUFDN0MsNEJBQTRCLDZCQUE2QjtBQUN6RCxvQ0FBb0MsNkJBQTZCO0FBQ2pFLHNDQUFzQyxlQUFlO0FBQ3JELHlDQUF5Qyw2REFBNkQsY0FBYyxFQUFFLEtBQUssZ0JBQWdCO0FBQzNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxpQkFBaUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGVBQWU7Ozs7QUFJdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQSxpQkFBaUIsNkNBQTZDO0FBQzlEO0FBQ0Esa0VBQWtFLEVBQUU7QUFDcEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IHRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYm9keS0tanNcIik7XHJcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tLWpzXCIpO1xyXG5jb25zdCBzZWFyY2hDb21wYW55ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXJcIik7XHJcbmNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc2VsZWN0LS1qc1wiKTtcclxuY29uc3QgcGFnaW5hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnaW5hdGlvbi0tanNcIik7XHJcbi8vIGxldCBjb21wYW55RGV0YWlscyA9IFtdO1xyXG4vLyBsZXQgZGV0YWlsc0NvbnRlbmVyID0gbnVsbDtcclxuXHJcbmxldCBzdGF0ZSA9IHtcclxuICBjb21wYW5pZXNEYXRhOiBbXSxcclxuICBmaWx0ZXJlZENvbXBhbmllczogW10sXHJcbiAgcGFnZTogMCxcclxuICBwZXJQYWdlOiAxMCxcclxuICBsb2FkZWQ6IGZhbHNlLFxyXG59XHJcblxyXG5pZiAoIXN0YXRlLmxvYWRlZCkge1xyXG4gIHRhYmxlLmlubmVySFRNTCA9IGA8dHI+PHRkIGNvbHNwYW49XCI0XCIgY2xhc3M9XCJsb2FkZXJcIj48ZGl2IGNsYXNzPVwibG9hZGVyX19pdGVtXCI+PC9kaXY+PC90ZD48L3RyPmA7XHJcbn1cclxuXHJcbnNlYXJjaENvbXBhbnkub25rZXlwcmVzcyA9IGhhbmRsZUtleXByZXNzO1xyXG5mb3JtLm9uc3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG5zZWxlY3Qub25jaGFuZ2UgPSBoYW5kbGVTZWxlY3Q7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVLZXlwcmVzcyhlKSB7XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBsZXQgdXNlcklucHV0ID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICBzdGF0ZS5maWx0ZXJlZENvbXBhbmllcyA9IHN0YXRlLmNvbXBhbmllc0RhdGEuZmlsdGVyKGNvbXBhbnkgPT5cclxuICAgICAgY29tcGFueS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModXNlcklucHV0LnRvTG93ZXJDYXNlKCkpXHJcbiAgICApO1xyXG4gICAgc3RhdGUucGFnZSA9IDA7XHJcbiAgICBzaG93RGF0YShzdGF0ZS5maWx0ZXJlZENvbXBhbmllcyk7XHJcbiAgfSwgMTAwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVNlbGVjdChlKSB7XHJcbiAgc3RhdGUucGFnZSA9IDA7XHJcbiAgc3RhdGUucGVyUGFnZSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICBzaG93RGF0YShzdGF0ZS5jb21wYW5pZXNEYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZldGNoRGF0YSgpIHtcclxuICBmZXRjaChcImh0dHBzOi8vcmVjcnVpdG1lbnQuaGFsLnNreWdhdGUuaW8vY29tcGFuaWVzXCIpXHJcbiAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XHJcbiAgICAgIGRhdGEubWFwKGNvbXBhbnkgPT4ge1xyXG4gICAgICAgIGZldGNoKFwiaHR0cHM6Ly9yZWNydWl0bWVudC5oYWwuc2t5Z2F0ZS5pby9pbmNvbWVzL1wiICsgY29tcGFueS5pZClcclxuICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29tcGFueUluY29tZSA9IHJlcy5pbmNvbWVzXHJcbiAgICAgICAgICAgICAgLm1hcChpbmNvbWUgPT4gcGFyc2VGbG9hdChpbmNvbWUudmFsdWUpKVxyXG4gICAgICAgICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTtcclxuXHJcbiAgICAgICAgICAgICAgc3RhdGUuY29tcGFuaWVzRGF0YS5wdXNoKHtcclxuICAgICAgICAgICAgICBpZDogY29tcGFueS5pZCxcclxuICAgICAgICAgICAgICBuYW1lOiBjb21wYW55Lm5hbWUsXHJcbiAgICAgICAgICAgICAgY2l0eTogY29tcGFueS5jaXR5LFxyXG4gICAgICAgICAgICAgIGluY29tZTogY29tcGFueUluY29tZS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUuY29tcGFuaWVzRGF0YS5sZW5ndGggPT09IGRhdGFMZW5ndGgpIHtcclxuICAgICAgICAgICAgICBzdGF0ZS5jb21wYW5pZXNEYXRhLnNvcnQoKGEsIGIpID0+IGIuaW5jb21lIC0gYS5pbmNvbWUpO1xyXG4gICAgICAgICAgICAgIHNob3dEYXRhKHN0YXRlLmNvbXBhbmllc0RhdGEsIDEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dEYXRhKGRhdGEpIHtcclxuICBsZXQgc2xpY2VGcm9tID0gMCArIHN0YXRlLnBlclBhZ2UgKiBzdGF0ZS5wYWdlO1xyXG4gIGxldCBzbGljZVRvID0gc3RhdGUucGVyUGFnZSArIHN0YXRlLnBlclBhZ2UgKiBzdGF0ZS5wYWdlO1xyXG4gIHBhZ2luYXRpb24uaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgdGFibGUuaW5uZXJIVE1MID0gZGF0YVxyXG4gICAgLm1hcChcclxuICAgICAgY29tcGFueSA9PiBgXHJcbiAgICAgICAgPHRyIGNsYXNzPVwidGFibGVfX3JvdyB0YWJsZV9fcm93LS1qc1wiIGlkPVwiJHtjb21wYW55LmlkfVwiPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidGFibGVfX2RhdGFcIj4ke2NvbXBhbnkuaWR9PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlX19kYXRhXCI+JHtjb21wYW55Lm5hbWV9PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlX19kYXRhXCI+JHtjb21wYW55LmNpdHl9PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlX19kYXRhXCI+JHtjb21wYW55LmluY29tZX08L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcbiAgICAgICAgYFxyXG4gICAgKVxyXG4gICAgLnNsaWNlKHNsaWNlRnJvbSwgc2xpY2VUbylcclxuICAgIC5qb2luKFwiXCIpO1xyXG5cclxuXHJcbi8qIEhBTkRMRSBDT01QQU5ZIERFVEFJTFMgKi9cclxuXHJcbmNvbnN0IGRldGFpbHNDb250ZW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLS1qcycpO1xyXG5jb25zdCB0YWJsZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcclxuY29uc3QgY29tcGFueURldGFpbHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZV9fcm93LS1qcycpKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb3VudEF2Z0luY29tZXMoZGF0YSkge1xyXG4gICAgICBjb25zdCBhdmdJbmNvbWVzID0gZGF0YS5tYXAoaW5jb21lID0+IHBhcnNlRmxvYXQoaW5jb21lLnZhbHVlKSkucmVkdWNlKChhLGIpID0+IGErYikgLyBkYXRhLmxlbmd0aDtcclxuICAgICAgcmV0dXJuIGF2Z0luY29tZXMudG9GaXhlZCgyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb3VudFRvdGFsSW5jb21lcyhkYXRhKSB7XHJcbiAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgIC5tYXAoaW5jb21lID0+IHBhcnNlRmxvYXQoaW5jb21lLnZhbHVlKSlcclxuICAgICAgLnJlZHVjZSgoYSxiKSA9PiBhK2IpXHJcbiAgICAgIC50b0ZpeGVkKDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhbnlEZXRhaWxzLm1hcChjb21wYW55ID0+IGNvbXBhbnkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGRldGFpbHNDb250ZW5lci5jbGFzc0xpc3QuYWRkKCdkZXRhaWxzLS12aXNpYmxlJyk7XHJcbiAgICAgIHRhYmxlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lci0taGlkZGVuJyk7XHJcbiAgICAgIGxldCBhdmVyYWdlSW5jb21lcyA9IG51bGw7XHJcbiAgICAgIGxldCBsYXN0TW9udGhJbmNvbWUgPSBudWxsO1xyXG4gICAgICBsZXQgdG90YWxSYW5nZUluY29tZSA9ICdObyBpbmNvbWVzIGluIHNlbGVjdGVkIHJhbmdlJztcclxuICAgICAgbGV0IGF2Z1JhbmdlSW5jb21lID0gJ05vIGluY29tZXMgaW4gc2VsZWN0ZWQgcmFuZ2UnO1xyXG5cclxuICAgICAgZmV0Y2goXCJodHRwczovL3JlY3J1aXRtZW50LmhhbC5za3lnYXRlLmlvL2luY29tZXMvXCIgKyBjb21wYW55LmlkKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgLy8gYXZlcmFnZUluY29tZXMgPSAoIGRhdGEuaW5jb21lcy5tYXAoaW5jb21lID0+IHBhcnNlRmxvYXQoaW5jb21lLnZhbHVlKSkucmVkdWNlKChhLGIpID0+IGErYikgLyBkYXRhLmluY29tZXMubGVuZ3RoICkudG9GaXhlZCgyKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3Qgc29ydGVkSW5jb21lcyA9IGRhdGEuaW5jb21lcy5zb3J0KChhLGIpID0+IG5ldyBEYXRlKGIuZGF0ZSkgLSBuZXcgRGF0ZShhLmRhdGUpKVxyXG4gICAgICAgICAgY29uc3QgbGFzdE1vbnRoID0gbmV3IERhdGUoc29ydGVkSW5jb21lc1swXS5kYXRlKS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgY29uc3QgcmVsZXZhbnRZZWFyID0gbmV3IERhdGUoc29ydGVkSW5jb21lc1swXS5kYXRlKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRJbmNvbWVzID0gc29ydGVkSW5jb21lcy5maWx0ZXIoaXRlbSA9PiBuZXcgRGF0ZShpdGVtLmRhdGUpLmdldE1vbnRoKCkgPT09IGxhc3RNb250aCAmJiBuZXcgRGF0ZShpdGVtLmRhdGUpLmdldEZ1bGxZZWFyKCkgPT09IHJlbGV2YW50WWVhcilcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbGFzdE1vbnRoSW5jb21lID0gY291bnRUb3RhbEluY29tZXMoZmlsdGVyZWRJbmNvbWVzKVxyXG4gICAgICAgICAgYXZlcmFnZUluY29tZXMgPSBjb3VudEF2Z0luY29tZXMoZGF0YS5pbmNvbWVzKVxyXG4gICAgICAgICAgLy8gbGFzdE1vbnRoSW5jb21lID0gc29ydGVkSW5jb21lc1xyXG4gICAgICAgICAgLy8gICAuZmlsdGVyKGl0ZW0gPT4gbmV3IERhdGUoaXRlbS5kYXRlKS5nZXRNb250aCgpID09PSBsYXN0TW9udGggJiYgbmV3IERhdGUoaXRlbS5kYXRlKS5nZXRGdWxsWWVhcigpID09PSByZWxldmFudFllYXIpXHJcbiAgICAgICAgICAvLyAgIC5tYXAoaW5jb21lID0+IHBhcnNlRmxvYXQoaW5jb21lLnZhbHVlKSlcclxuICAgICAgICAgIC8vICAgLnJlZHVjZSgoYSxiKSA9PiBhK2IpXHJcbiAgICAgICAgICAvLyAgIC50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBkZXRhaWxzQ29udGVuZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbHNfX2JveFwiPlxyXG4gICAgICAgICAgPGgxPiR7Y29tcGFueS5jZWxsc1sxXS50ZXh0Q29udGVudH08L2gxPlxyXG4gICAgICAgICAgPHA+PGI+Q2l0eTo8L2I+ICR7Y29tcGFueS5jZWxsc1syXS50ZXh0Q29udGVudH08L3A+XHJcbiAgICAgICAgICA8cD48Yj5Ub3RhbCBpbmNvbWU6PC9iPiAke2NvbXBhbnkuY2VsbHNbM10udGV4dENvbnRlbnR9PC9wPlxyXG4gICAgICAgICAgPHA+PGI+QXZlcmFnZSBpbmNvbWU6PC9iPiAke2F2ZXJhZ2VJbmNvbWVzfTwvcD5cclxuICAgICAgICAgIDxwPjxiPkxhc3QgbW9udGggaW5jb21lPC9iPiAoJHtuZXcgRGF0ZShzb3J0ZWRJbmNvbWVzWzBdLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tR0InLCB7bW9udGg6ICdsb25nJ30pfSk6ICR7bGFzdE1vbnRoSW5jb21lfTwvcD5cclxuICAgICAgICAgIDxwPjxiPlNob3cgdG90YWwgYW5kIGF2ZXJhZ2UgaW5jb21lczwvYj48L3A+XHJcbiAgICAgICAgXHJcbiAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImluY29tZXMtZnJvbVwiPkZyb206IDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiaW5jb21lcy1mcm9tXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJpbmNvbWVzLXRvXCI+VG86IDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiaW5jb21lcy10b1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbHRpcCB0b29sdGlwLS1qc1wiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9vbHRpcHRleHRcIj5DaG9vc2Ugc3Vic2VxdWVudCBkYXRlIG9yIHRoZSBzYW1lIGFzIGEgZGF0ZSAnRnJvbSc8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9wPlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWxzX19yYW5nZSBkZXRhaWxzX19yYW5nZS0tanNcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicmV0dXJuXCIgaWQ9XCJyZXR1cm5cIj5SZXR1cm48L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgYFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluY29tZXNGcm9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luY29tZXMtZnJvbScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5jb21lc1RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luY29tZXMtdG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2x0aXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9vbHRpcC0tanMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbHNSYW5nZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzX19yYW5nZS0tanMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRlRnJvbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZVRvID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpbmNvbWVzRnJvbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlLnRhcmdldC52YWx1ZSA8PSBkYXRlVG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmNsYXNzTGlzdC5yZW1vdmUoJ3Rvb2x0aXAtLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmNsYXNzTGlzdC5hZGQoJ3Rvb2x0aXAtLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFJhbmdlSW5jb21lID0gJ05vIGluY29tZXMgaW4gc2VsZWN0ZWQgcmFuZ2UnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHNSYW5nZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRnJvbSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJbmNvbWVzRnJvbVJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgaW5jb21lc1RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUudGFyZ2V0LnZhbHVlIDwgZGF0ZUZyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmNsYXNzTGlzdC5hZGQoJ3Rvb2x0aXAtLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFJhbmdlSW5jb21lID0gJ05vIGluY29tZXMgaW4gc2VsZWN0ZWQgcmFuZ2UnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHNSYW5nZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLmNsYXNzTGlzdC5yZW1vdmUoJ3Rvb2x0aXAtLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUbyA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJbmNvbWVzRnJvbVJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZpbHRlckluY29tZXNGcm9tUmFuZ2UoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGVUbyA+PSBkYXRlRnJvbSAmJiBkYXRlRnJvbSAhPT0gbnVsbCAmJiBkYXRlVG8gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZEluY29tZXNGcm9tUmFuZ2UgPSBzb3J0ZWRJbmNvbWVzLmZpbHRlcihpdGVtID0+IG5ldyBEYXRlKGl0ZW0uZGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVGcm9tKS5nZXRUaW1lKCkgJiYgbmV3IERhdGUoaXRlbS5kYXRlKS5nZXRUaW1lKCkgPD0gbmV3IERhdGUoZGF0ZVRvKS5nZXRUaW1lKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZihmaWx0ZXJlZEluY29tZXNGcm9tUmFuZ2UgIT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUmFuZ2VJbmNvbWUgPSBjb3VudFRvdGFsSW5jb21lcyhmaWx0ZXJlZEluY29tZXNGcm9tUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHNSYW5nZS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD50b3RhbDogJHt0b3RhbFJhbmdlSW5jb21lfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIC8vIDxwPmF2ZXJhZ2U6ICR7YXZnUmFuZ2VJbmNvbWV9PC9wPlxyXG5cclxuXHJcblxyXG4gICAgICAgICAgY29uc3QgcmV0dXJuQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldHVybicpO1xyXG4gICAgICAgICAgcmV0dXJuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBkZXRhaWxzQ29udGVuZXIuY2xhc3NMaXN0LnJlbW92ZSgnZGV0YWlscy0tdmlzaWJsZScpXHJcbiAgICAgICAgICAgIHRhYmxlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbnRhaW5lci0taGlkZGVuJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pKVxyXG5cclxuLyogSEFORExFIFBBR0lOQVRJT04gKi9cclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBNYXRoLmNlaWwoZGF0YS5sZW5ndGggLyBzdGF0ZS5wZXJQYWdlKTsgaSsrKSB7XHJcbiAgICBwYWdpbmF0aW9uLmlubmVySFRNTCArPSBgXHJcbiAgICAgIDxidXR0b24gY2xhc3M9XCJwYWdpbmF0aW9uX19idXR0b24gcGFnaW5hdGlvbl9fYnV0dG9uLS1qc1wiPiR7aX08L2J1dHRvbj5cclxuICAgICAgYDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wYWdpbmF0aW9uX19idXR0b24tLWpzXCIpXHJcbiAgKTtcclxuICBcclxuICBidXR0b25zLm1hcChidXR0b24gPT4ge1xyXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgc3RhdGUucGFnZSA9IGUudGFyZ2V0LnRleHRDb250ZW50IC0gMTtcclxuICAgICAgc2hvd0RhdGEoZGF0YSwgc3RhdGUucGVyUGFnZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZmV0Y2hEYXRhKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')}]);